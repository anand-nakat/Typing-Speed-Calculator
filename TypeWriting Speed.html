<!DOCTYPE html>
<html>
<head>
	<title>Typing Speed</title>
	  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" rel="stylesheet"> 
<style>
	*{
		padding: 0;
		margin: 0;
		box-sizing: border-box;
		font-family: 'Josefin Sans', sans-serif;
	}

	
.main{
	width: 100%;
	height: 100vh;
	position: relative;

}

.content{
	position:  absolute;
	top: 50%;
	left: 50%;
	transform:  translate(-50%,-50%);
	text-align: center;
	}

</style>

</head>

<body class="bg-primary">



	<div class="main">


			<div class="content container-fluid">
				

					<h1 class="text-white font-weight-bold"> Check your Typing Speed  </h1> <br>

					<h3 id="message" class="text-dark font-weight-bold">Sentence will appear Here! </h3>

					<textarea autocomplete="off" placeholder="Click on Start" id="text" rows="10" class="w-100 bg-dark text-white" ></textarea>
					<br>
					<button class="btn btn-light" id="start-btn">Start</button>

					<div>
						<h2 id="result" class="text-white"></h2>

					</div>

			</div>

	</div>

</body>

<script>
	
$(document).ready(function() {
let button= document.getElementById("start-btn");
let text= document.getElementById("text");
let message= document.getElementById("message");
let result= document.getElementById("result");
let startTime, endTime;

text.disabled=true;

const SetofWords= [ "Hi I'm Anand Nakat, I'm from Akola","I hope you're typing this correctly and quickly",
"After typing click on button to check your score" ];


const startGame = () => {
let index= Math.floor(Math.random()*SetofWords.length);
$("#message").html(SetofWords[index]);
let date= new Date();
startTime = date.getTime();


}

const endGame= () => {
	let date= new Date();
	let endTime= date.getTime();
	let timeTaken= (endTime-startTime-800)/1000;
	console.log(timeTaken);

	let totalWords= (message.innerText.split(" ")).length;
	let wordsCount= (text.value.split(" ")).length;
	console.log(totalWords+ " "+wordsCount+message.innerText);
	
	let speed= ((60/timeTaken)*wordsCount);

	let correctWords=accuracy(text.value,message.innerText);
	console.log('Total Words:'+wordsCount+ 'Correct Words:'+correctWords);

	$("#result").html('Speed: '+ speed+" wpm" + '<br>'+'Words Typed: '+ wordsCount + '<br>' +'Correct Words: '+ correctWords);
	$("#message").html("Sentence will appear Here!");
	$("#text").prop("disabled",true);
}

const accuracy = (str,message) => {
/*console.log(str.split(" "));
let array=str.split(" ");*/
let count=0;
console.log(message);
 str.split(" ").forEach(function (item) { 
            console.log("item: "+item+ message.indexOf(item)); 
            if(message.indexOf(item) > -1)
            	count++;
         
        }); 
 return count;
}


button.addEventListener('click',function(){
		console.log("Clicked ");
	if(this.innerText === "Start")
	{
		console.log('Started');
		this.innerText="Stop";
		$("#text").prop("disabled",false);
		startGame();

	}
	else
	{	
		
		console.log('Stopped');
		$(this).html("Start");
		endGame();
		

	}
});


	
});


</script>
</html>
